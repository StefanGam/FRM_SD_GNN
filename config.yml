# ===============================
# Runtime mode
# ===============================
universe: crypto            # currently only 'crypto' is auto-built
frequency: daily            # options: daily | weekly | monthly

crypto:
  folder: data/cryptos      # where bitcoin.csv, litecoin.csv, etc. live
week_ending: SUN            # used only when frequency: weekly (SUN, MON, ..., SAT)

# Direct path to precomputed returns
returns_path: data/daily_log_returns.csv

# If you want to provide your own returns file instead of auto-building:
# Uncomment the line below and point to the desired CSV (e.g., daily_log_returns.csv)
# returns_path: data/daily_log_returns.csv

# ===============================
# FRM / Quantile-Lasso settings
# ===============================
window: 20                  # rolling window length (realistic for 90 days)
step: 1                     # advance by 1 day each step
tau: 0.05                   # quantile for λ
lambda_grid: [0.1, 0.5, 1.0] # moderate grid
n_folds: 2                  # cross-validation folds inside FRM
n_jobs: 4                   # parallelism

# ===============================
# SD / Network Factor settings
# ===============================
centrality_metric: eigenvector   # eigenvector | pagerank | indegree | outdegree
factor_high: 2                   # top-K assets for long leg
factor_low: 2                    # bottom-K assets for short leg
factor_output: outputs/NetworkRisk_daily.csv   # output path for H–L factor series

sd:
  method: distributional            # "scalar" for simple dominance; "distributional" for full SD tests
  order: 1                  # SD order (1 for speed)
  lookback: 15             # how many λ-days form the empirical distribution
  alpha: 0.1               # significance level
  mht: fdr_bh               # multiple testing correction (none | fdr_bh)
  pval: perm                # permutation ("perm") or one-sided KS ("ks", SD1 only)
  perm_B: 100              # bootstrap repetitions
  
  # Advanced SD test modes (when method: distributional)
  test_mode: right_tail    # START WITH: strict | pysdtest | epsilon | left_tail | right_tail | bootstrap_prob
  
  # Parameters for specific modes
  epsilon: 0.01             # tolerance for epsilon mode (allow small violations)
  alpha_tail: 0.20          # tail modes: focus on worst/best X% of outcomes
                            # left_tail = worst X% (low λ = low systemic risk)
                            # right_tail = best X% (high λ = high systemic risk)
  keep_threshold: 0.60      # bootstrap_prob mode: edge if Pr(dominance) >= threshold
  
  # Bootstrap probability mode settings
  bootstrap_B: 100          # reduced for speed
  block_len: 5              # stationary bootstrap block length for time dependence
  
  # Enhanced grid and resampling options
  ngrid: 50                 # reduced grid points for speed
  resampling: bootstrap     # bootstrap | subsampling | paired bootstrap | stationary_bootstrap
  random_state: 42          # seed for reproducible bootstrap results

# ===============================
# Fast-test time window (optional)
# ===============================
test_window:
  # Choose exactly ONE of the following approaches:
  # 1) Keep only the last N rows (daily or weekly):
  last_days: 90             # use when frequency: daily (test with more data)
  # last_weeks: 8           # use when frequency: weekly

  # 2) Explicit calendar range (works for any frequency, incl. monthly):
  # start: 2023-03-10
  # end:   2023-03-15
